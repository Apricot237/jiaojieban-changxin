<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¾å¤‡äº¤æ¥ç­ç®¡ç†</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        
        .form-row {
    display: flex;
    gap: 15px;
}
.form-row .form-group {
    flex: 1;
}
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --light-bg: #f8f9fa;
            --border-color: #dee2e6;
            --text-muted: #6c757d;
            --white: #ffffff;
            --info-color: #17a2b8;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --success-color: #28a745;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--primary-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 2200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .action-bar {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            padding: 15px 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn i {
            font-size: 14px;
        }
        
        .btn-default {
            background-color: var(--light-bg);
            color: var(--primary-color);
            border: 1px solid var(--border-color);
        }
        
        .btn-default:hover {
            background-color: #e9ecef;
        }
        
        .btn-primary {
            background-color: var(--secondary-color);
            color: var(--white);
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
        }
        
        .btn-white {
            background-color: var(--white);
            color: var(--primary-color);
            border: 1px solid var(--border-color);
        }
        
        .btn-white:hover {
            background-color: #f8f9fa;
        }
        
        .btn-info {
            background-color: var(--info-color);
            color: var(--white);
        }
        
        .btn-info:hover {
            background-color: #138496;
        }
        
        .btn-highlight {
            position: relative;
            overflow: hidden;
        }
        
        .btn-highlight::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 0 15px 15px 0;
            border-color: transparent var(--secondary-color) transparent transparent;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .card-header {
            padding: 15px 20px;
            background-color: var(--light-bg);
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card-header h3 {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        
        .card-header i {
            margin-right: 8px;
            transition: transform 0.3s;
        }
        
        .card-header.collapsed i {
            transform: rotate(-90deg);
        }
        
        .card-body {
            padding: 20px;
            display: block;
        }
        
        .card-body.collapsed {
            display: none;
        }
        
        .basic-info {
            display: flex;
            flex-wrap: wrap;
        }
        
        .info-item {
            margin-right: 20px;
            margin-bottom: 10px;
            min-width: 200px;
        }
        
        .info-label {
            color: var(--text-muted);
            font-size: 14px;
        }
        
        .info-value {
            font-weight: 600;
        }
        
        .priority-high {
            border-left: 4px solid var(--danger-color);
            padding-left: 15px;
        }
        
        .priority-medium {
            border-left: 4px solid var(--warning-color);
            padding-left: 15px;
        }
        
        .priority-low {
            border-left: 4px solid var(--success-color);
            padding-left: 15px;
        }
        
        .task-item {
            padding: 12px 15px;
            border-radius: 6px;
            margin-bottom: 10px;
            background-color: var(--light-bg);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .task-info {
            flex-grow: 1;
        }
        
        .task-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .task-meta {
            font-size: 14px;
            color: var(--text-muted);
        }
        
        .task-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-sm {
            padding: 4px 8px;
            font-size: 12px;
        }
        
        .priority-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
        }
        
        .priority-badge.high {
            background-color: var(--danger-color);
            color: var(--white);
        }
        
        .priority-badge.medium {
            background-color: var(--warning-color);
            color: var(--white);
        }
        
        .priority-badge.low {
            background-color: var(--success-color);
            color: var(--white);
        }
        
        .sort-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .sort-controls select {
            padding: 6px 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: white;
        }
        
        .priority-stats {
            display: flex;
            gap: 15px;
        }
        
        .priority-stat-item {
            display: flex;
            align-items: center;
            font-size: 14px;
        }
        
        .priority-stat-item i {
            margin-right: 5px;
        }
        
        .priority-stat-item.high {
            color: var(--danger-color);
        }
        
        .priority-stat-item.medium {
            color: var(--warning-color);
        }
        
        .priority-stat-item.low {
            color: var(--success-color);
        }
        
        .priority-stat-count {
            font-weight: 600;
            margin-left: 3px;
        }
        
        .problem-item {
            padding: 10px 15px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
        }
        
        .problem-item:last-child {
            border-bottom: none;
        }
        
        .problem-date {
            color: var(--text-muted);
            font-size: 14px;
            margin-right: 10px;
        }
        
        .status-badge-small {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-badge-small.resolved {
            background-color: var(--success-color);
            color: var(--white);
        }
        
        .status-badge-small.in-progress {
            background-color: var(--info-color);
            color: var(--white);
        }
        
        .status-badge-small.pending {
            background-color: var(--warning-color);
            color: var(--white);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background-color: var(--secondary-color);
            color: var(--white);
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: none;
            z-index: 1000;
        }
        
        .notification.show {
            display: block;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .empty-state {
            text-align: center;
            padding: 30px;
            color: var(--text-muted);
        }
        
        .empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            color: #dee2e6;
        }
        
        .highlight-text {
            color: var(--secondary-color);
            font-weight: 600;
        }
        
        .shift-info {
            font-weight: 500;
        }
        
        .status-text {
            font-weight: 600;
            color: var(--secondary-color);
            background-color: rgba(52, 152, 219, 0.1);
            padding: 2px 8px;
            border-radius: 12px;
        }
        
        /* è§’è‰²é€‰æ‹©å™¨æ ·å¼ */
        .role-selector {
            display: none;
            align-items: center;
            gap: 10px;
            margin-right: 15px;
        }
        
        .role-selector label {
            font-weight: 500;
            color: var(--text-muted);
        }
        
        .role-selector select {
            padding: 6px 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: white;
            min-width: 150px;
        }
        
        /* é—®é¢˜æ¸…å•æ¨¡å—æ ·å¼ */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
            position: relative;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            display: flex;
            align-items: center;
        }
        
        .tab:hover {
            color: var(--secondary-color);
        }
        
        .tab.active {
            color: var(--secondary-color);
            border-bottom-color: var(--secondary-color);
        }
        
        .tab-count {
            background-color: var(--secondary-color);
            color: white;
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 12px;
            margin-left: 6px;
            min-width: 20px;
            text-align: center;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .problem-list {
            border: 1px solid var(--border-color);
            border-radius: 6px;
            overflow: hidden;
        }
        
        .problem-list-item {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            transition: all 0.3s;
        }
        
        .problem-list-item:last-child {
            border-bottom: none;
        }
        
        .problem-list-item:hover {
            background-color: rgba(52, 152, 219, 0.05);
        }
        
        .problem-info {
            flex-grow: 1;
            padding-right: 15px;
        }
        
        .problem-title {
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }
        
        .problem-status {
            margin-left: 10px;
            font-size: 12px;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        
        .problem-status i {
            margin-right: 4px;
        }
        
        .problem-status.resolved {
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--success-color);
        }
        
        .problem-status.pending {
            background-color: rgba(255, 193, 7, 0.1);
            color: var(--warning-color);
        }
        
        .problem-status.in-progress {
            background-color: rgba(23, 162, 184, 0.1);
            color: var(--info-color);
        }
        
        .problem-description {
            color: var(--text-muted);
            font-size: 14px;
            margin-bottom: 10px;
            line-height: 1.5;
            max-height: 3em;
            overflow: hidden;
        }
        
        .problem-toggle {
            color: var(--secondary-color);
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            margin-top: 5px;
        }
        
        .problem-toggle i {
            margin-left: 5px;
            transition: transform 0.3s;
        }
        
        .problem-toggle.expanded i {
            transform: rotate(180deg);
        }
        
        .problem-details {
            margin-top: 15px;
            overflow: hidden;
            max-height: 0;
            transition: max-height 0.3s ease-out;
        }
        
        .problem-details.expanded {
            max-height: 500px;
        }
        
        /* ä¼˜åŒ–åçš„è¯¦ç»†ä¿¡æ¯ç½‘æ ¼å¸ƒå±€ */
        .problem-details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            background-color: var(--light-bg);
            border-radius: 6px;
            padding: 12px;
        }
        
        .problem-detail-item {
            display: flex;
            align-items: flex-start;
        }
        
        .problem-detail-label {
            font-weight: 600;
            color: var(--text-muted);
            margin-right: 8px;
            white-space: nowrap;
            min-width: 90px;
        }
        
        .problem-detail-value {
            color: var(--primary-color);
            word-break: break-word;
            flex: 1;
        }
        
        /* å¦‚æœå­—æ®µæ•°é‡æ˜¯å¥‡æ•°ï¼Œæœ€åä¸€ä¸ªå­—æ®µè·¨ä¸¤åˆ— */
        .problem-detail-item:last-child:nth-child(odd) {
            grid-column: span 2;
        }
        
        .problem-actions {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }
        
        .problem-actions button {
            padding: 5px 10px;
            font-size: 12px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
        }
        
        .problem-actions .btn-edit {
            background-color: var(--info-color);
            color: var(--white);
        }
        
        .problem-actions .btn-edit:hover {
            background-color: #138496;
        }
        
        .problem-actions .btn-confirm {
            background-color: var(--secondary-color);
            color: var(--white);
        }
        
        .problem-actions .btn-confirm:hover {
            background-color: #2980b9;
        }
        
        .problem-actions .btn-view {
            background-color: var(--light-bg);
            color: var(--primary-color);
            border: 1px solid var(--border-color);
        }
        
        .problem-actions .btn-view:hover {
            background-color: #e9ecef;
        }
        
        .problem-actions .btn-delete {
            background-color: var(--danger-color);
            color: var(--white);
        }
        
        .problem-actions .btn-delete:hover {
            background-color: #c82333;
        }
        
        .problem-actions .btn-transfer {
            background-color: var(--white);
            color: var(--secondary-color);
            border: 1px solid var(--secondary-color);
        }
        
        .problem-actions .btn-transfer:hover {
            background-color: rgba(52, 152, 219, 0.1);
        }
        
        .add-problem-btn {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        
        .add-problem-btn:hover {
            background-color: #2980b9;
            transform: translateY(-50%) scale(1.1);
        }
        
        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 8px;
            width: 90%;
            max-width: 1000px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            animation: modalFadeIn 0.3s ease-out;
        }
        
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            font-size: 18px;
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--text-muted);
        }
        
        .modal-close:hover {
            color: var(--primary-color);
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        textarea.form-control {
            resize: vertical;
            min-height: 80px;
        }
        
        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        @media (max-width: 768px) {
            .basic-info {
                flex-direction: column;
            }
            
            .info-item {
                margin-right: 0;
                min-width: 100%;
            }
            
            .task-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .task-actions {
                margin-top: 10px;
                width: 100%;
                justify-content: flex-end;
            }
            
            .action-bar {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .action-buttons {
                margin-top: 10px;
                width: 100%;
                justify-content: space-between;
                flex-wrap: wrap;
            }
            
            .role-selector {
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .tabs {
                overflow-x: auto;
            }
            
            .problem-list-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .problem-actions {
                margin-top: 10px;
                width: 100%;
                justify-content: flex-end;
            }
            
            .modal-content {
                width: 95%;
            }
            
            .sort-controls {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .priority-stats {
                width: 100%;
                justify-content: space-between;
            }
            
            /* ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šè¯¦ç»†ä¿¡æ¯ç½‘æ ¼æ”¹ä¸ºå•åˆ— */
            .problem-details-grid {
                grid-template-columns: 1fr;
            }
            
            .problem-detail-item:last-child:nth-child(odd) {
                grid-column: span 1;
            }
        }
    </style>


</head>
<body>
     <!-- é˜®å¤´éƒ¨åŒºåŸŸå¼€å§‹ -->
        <div style="display: flex; align-items: center; padding: 15px 30px;background-color: #ffffff; border-bottom: 1px solid #c7c7c7;">
            <div style="display: flex; align-items: center;">
                <!-- ä¸­å›½çƒŸè‰LOGO SVG -->
             <svg 
        xmlns="http://www.w3.org/2000/svg" 
        viewBox="0 0 225 64" 
        fill="none" 
        style="width: 200px; height: auto; margin-right: 26px;"
    
             
             
        ><path fill="#1A1311" d="M75.51 57.152a9.15 9.15 0 0 1-5.376 2.277 4.987 4.987 0 0 1-3.757-1.53A5.04 5.04 0 0 1 65 54.335a5.765 5.765 0 0 1 3.142-5.18 6.957 6.957 0 0 1 3.611-.892c1.181-.008 2.355.167 3.482.52v2.522h-.666a2.445 2.445 0 0 0-1.222-1.9 4.547 4.547 0 0 0-2.421-.617 4.047 4.047 0 0 0-3.245 1.404 4.753 4.753 0 0 0-1.08 3.171 4.926 4.926 0 0 0 1.218 3.372 4.375 4.375 0 0 0 3.464 1.471 7.246 7.246 0 0 0 4.234-1.577l-.008.522ZM89.466 59.181H84.92v-.397a1.7 1.7 0 0 0 1.12-.3c.23-.291.337-.662.296-1.03V53.61h-5.67v3.843c0 .86.471 1.307 1.411 1.331v.397h-4.55v-.397c.398.039.796-.067 1.121-.3.229-.292.334-.662.294-1.03v-7.228a1.408 1.408 0 0 0-.294-1.027 1.761 1.761 0 0 0-1.12-.293v-.397h4.546v.397a1.761 1.761 0 0 0-1.121.293c-.223.293-.326.66-.287 1.027v2.87h5.67v-2.87a1.442 1.442 0 0 0-.287-1.027 1.761 1.761 0 0 0-1.121-.293v-.397h4.538v.397a1.742 1.742 0 0 0-1.12.293c-.23.29-.335.66-.294 1.027v7.234c-.043.37.063.744.293 1.037a1.68 1.68 0 0 0 1.121.293v.391ZM96.228 59.181h-4.546v-.397c.397.04.796-.067 1.12-.3a1.42 1.42 0 0 0 .287-1.03v-7.228a1.406 1.406 0 0 0-.286-1.027 1.744 1.744 0 0 0-1.121-.293v-.397h4.546v.397a1.72 1.72 0 0 0-1.12.293c-.23.29-.335.66-.294 1.027v7.234c0 .86.47 1.302 1.413 1.33l.001.391ZM110.51 48.907c-1.121.097-1.703 1.77-1.703 5.022v5.645h-.427l-8.027-9.735v3.105a22.408 22.408 0 0 0 .16 3.245c.245 1.642.762 2.509 1.552 2.6v.393h-4.036v-.397c1.131-.158 1.697-2.076 1.7-5.755v-2.882a1.229 1.229 0 0 0-.311-.961 1.762 1.762 0 0 0-1.088-.282v-.397h3.043l6.762 8.155v-2.471c0-3.416-.559-5.175-1.691-5.285v-.398h4.066v.398ZM123.053 59.187h-3.335v-.398h.208c.111 0 .161-.096.161-.273a.555.555 0 0 0-.036-.19l-1.121-2.901h-4.064a7.373 7.373 0 0 0-.641 2.402.872.872 0 0 0 .311.695c.22.184.501.278.788.263h.496v.402h-4.164v-.398c.699-.036 1.333-.695 1.896-1.997l3.82-8.725h.543l3.299 8.536c.164.47.378.921.641 1.344a1.57 1.57 0 0 0 1.202.842l-.004.398Zm-4.325-4.276-1.692-4.443-1.949 4.443h3.641ZM139.493 51.305h-.653c-.025-1.602-.968-2.403-2.829-2.403h-.507v8.554c0 .86.48 1.307 1.417 1.33v.396h-4.55v-.397c.398.04.796-.066 1.121-.298.23-.291.336-.662.295-1.031v-8.552h-.641c-1.723 0-2.611.8-2.663 2.402h-.647V48.13h.404c.086.251.206.38.368.38h8.131c.214 0 .31-.129.31-.38h.444v3.176ZM153.699 53.339a5.452 5.452 0 0 1-1.045 3.153 6.445 6.445 0 0 1-2.686 2.242 7.352 7.352 0 0 1-3.134.69 5.795 5.795 0 0 1-4.004-1.454 4.645 4.645 0 0 1-1.613-3.585 5.655 5.655 0 0 1 2.009-4.283 6.76 6.76 0 0 1 4.711-1.838 5.793 5.793 0 0 1 4.864 2.272 4.49 4.49 0 0 1 .902 2.803m-1.575 1.475a6.16 6.16 0 0 0-.709-2.893 5.012 5.012 0 0 0-2.162-2.192 5.382 5.382 0 0 0-2.487-.69 3.771 3.771 0 0 0-3.724 2.393 3.758 3.758 0 0 0-.253 1.545 5.799 5.799 0 0 0 1.429 3.9 5.035 5.035 0 0 0 3.983 1.81 3.804 3.804 0 0 0 3.922-3.873M165.009 55.424a3.298 3.298 0 0 1-1.518 2.712 5.413 5.413 0 0 1-3.24 1.05h-4.362v-.397c.397.042.797-.064 1.121-.298.23-.291.336-.662.294-1.031v-7.234a1.396 1.396 0 0 0-.294-1.027 1.724 1.724 0 0 0-1.121-.293v-.397h5.626a4.739 4.739 0 0 1 2.046.335 1.576 1.576 0 0 1 .905 1.552c0 1.143-.881 2.186-2.633 3.111a5.996 5.996 0 0 1 2.174.32 1.6 1.6 0 0 1 1.004 1.602m-2.213-3.907a2.868 2.868 0 0 0-.563-1.773 2.08 2.08 0 0 0-1.747-.843 2.49 2.49 0 0 0-1.467.396v3.893h1.813c1.308 0 1.962-.558 1.962-1.673m.428 4.935a2.663 2.663 0 0 0-.891-2.096 3.445 3.445 0 0 0-2.365-.788h-.948v4.4a3.41 3.41 0 0 0 1.997.683 2.077 2.077 0 0 0 2.072-1.337c.105-.275.15-.57.133-.863M178.103 59.187h-3.336v-.398h.207c.11 0 .16-.096.16-.273a.556.556 0 0 0-.039-.19l-1.111-2.901h-4.068a7.318 7.318 0 0 0-.64 2.402.841.841 0 0 0 .32.695c.219.184.5.278.786.263h.497v.402h-4.164v-.398c.696-.036 1.332-.695 1.893-1.997l3.792-8.725h.549l3.293 8.536c.168.469.383.919.641 1.344a1.579 1.579 0 0 0 1.21.842l.01.398Zm-4.324-4.276-1.699-4.443-1.949 4.443h3.648ZM190.289 57.152a9.147 9.147 0 0 1-5.377 2.277 4.965 4.965 0 0 1-5.125-5.093 5.766 5.766 0 0 1 3.137-5.18 6.976 6.976 0 0 1 3.613-.892 11.317 11.317 0 0 1 3.477.52v2.522h-.66a2.44 2.44 0 0 0-1.228-1.9 4.512 4.512 0 0 0-2.42-.617 4.038 4.038 0 0 0-3.243 1.404 4.743 4.743 0 0 0-1.089 3.171 4.897 4.897 0 0 0 1.217 3.371 4.373 4.373 0 0 0 3.463 1.472 7.234 7.234 0 0 0 4.234-1.577l.001.522ZM202.954 57.152a9.154 9.154 0 0 1-5.376 2.277 4.98 4.98 0 0 1-3.758-1.53 5.045 5.045 0 0 1-1.374-3.563 5.764 5.764 0 0 1 3.139-5.18 6.956 6.956 0 0 1 3.613-.892 11.336 11.336 0 0 1 3.475.52v2.523h-.655a2.44 2.44 0 0 0-1.229-1.901 4.524 4.524 0 0 0-2.419-.617 4.035 4.035 0 0 0-3.241 1.404 4.747 4.747 0 0 0-1.083 3.178 4.91 4.91 0 0 0 1.211 3.37 4.378 4.378 0 0 0 3.469 1.473 7.239 7.239 0 0 0 4.234-1.578l-.006.516ZM217.586 53.34a5.392 5.392 0 0 1-1.046 3.153 6.402 6.402 0 0 1-2.68 2.242 7.371 7.371 0 0 1-3.133.69 5.79 5.79 0 0 1-4.004-1.454 4.622 4.622 0 0 1-1.619-3.592 5.678 5.678 0 0 1 2.004-4.282 6.764 6.764 0 0 1 4.71-1.839 5.786 5.786 0 0 1 4.865 2.273c.609.805.927 1.793.902 2.802m-1.57 1.475c.006-1.007-.236-2-.705-2.892a5.02 5.02 0 0 0-2.173-2.193 5.372 5.372 0 0 0-2.477-.682 3.784 3.784 0 0 0-3.983 3.938 5.776 5.776 0 0 0 1.441 3.9 5.035 5.035 0 0 0 3.983 1.81 3.808 3.808 0 0 0 3.922-3.873M66.934 31.267V12.352h13.178V6.335h5.706v6.017h13.173v18.774h-5.706v-1.814h-7.467v10.782h-5.706V29.312h-7.47v1.955h-5.708Zm5.709-6.995h7.466v-6.875h-7.466v6.875Zm20.642-6.875h-7.467v6.875h7.467v-6.875ZM105.984 39.956V7.593h32.781v32.363H133.2v-1.674h-21.803v1.672l-5.413.002Zm5.413-5.742H133.2V12.08h-21.803v22.136Zm1.171-16.25V13.76h19.319v4.202h-7.46v2.243h6.874v4.202h-2.486a71.765 71.765 0 0 0 2.781 2.525l-1.602 1.258h2.192v4.35h-19.757v-4.352h6.886v-3.781h-6.012v-4.202h5.999v-2.242l-6.734.001Zm15.075 10.224a27.372 27.372 0 0 1-1.313-1.4l-.881-.842 1.762-1.54h-2.784v3.782h3.216ZM145.616 23.422c-.193-1.495-.727-4.156-1.601-7.984-.151-.65-.297-1.302-.439-1.955l3.363-.71c.197.936.441 2.243.732 3.929l.873 4.625V19.92c.096-2.055.145-4.111.147-6.169V6.61h4.822v7.568c.197-.282.539-.697 1.027-1.264.391-.563.684-.978.881-1.258l1.171 1.258V7.727h21.658v32.228h-4.832v-1.54h-11.993v1.54h-4.833v-6.44l-1.9 2.385-3.076-3.922a36.46 36.46 0 0 1-4.393 8.12 60.319 60.319 0 0 0-3.508-3.636 22.414 22.414 0 0 0 4.686-13.592l-2.785.553Zm7.174 3.509c.48.469 1.173 1.166 2.046 2.093.783.759 1.368 1.313 1.762 1.686V16.844a11.75 11.75 0 0 1-1.613 1.533 40.161 40.161 0 0 1-1.601 1.687 66.898 66.898 0 0 1-.588 6.867m9.366-5.892v-4.062h3.073c.096-1.302.146-2.615.146-3.923h4.386v3.923h2.932v4.062h-3.074a5.564 5.564 0 0 1-.292 1.827c.783.934 1.802 2.242 3.073 3.92.481.558.823.98 1.02 1.26v-15.97h-11.993v16.948a12.74 12.74 0 0 0 3.658-7.983l-2.929-.002Zm9.072 11.766c-1.167-1.68-2.338-3.355-3.506-5.04a25.689 25.689 0 0 1-3.811 5.605l-2.481-2.663v3.642h11.994V30.43l-2.196 2.375ZM183.341 12.914V8.712h9.079V6.47h5.125v2.242h7.018V6.47h5.125v2.242h8.925v4.202h-8.921v1.68h-5.124v-1.68h-7.018v1.68h-5.125v-1.68h-9.084Zm3.373 17.234v-14.85h28.544v14.853h-11.417v1.821h14.772v3.922h-14.776v4.057h-5.563v-4.052H183.34v-3.927h14.934v-1.823l-11.56-.001Zm5.413-9.11h17.713V19.08h-17.713v1.959Zm0 5.19h17.713v-1.964h-17.713v1.963Z"/><path fill="#017359" d="M30.15 18.42c-3.479 4.549-3.826 9.475-1.661 14.688.64 1.54 1.477 2.971 2.452 4.322 2.714 3.738 3.959 7.89 3.466 12.537-.008.075.044.156.117.395 4.79-4.393 6.21-9.997 6.232-16.157.335 0 .426.262.57.429 3.484 4.122 6.965 8.245 10.444 12.37.325.381.28.623.025 1-4.324 6.397-10.253 10.328-17.792 11.595-7.82 1.313-14.9-.607-21.096-5.61-5.239-4.233-8.412-9.79-9.505-16.471-1.302-7.955.564-15.163 5.522-21.472 4.176-5.313 9.656-8.53 16.247-9.64 7.848-1.322 14.935.598 21.195 5.582 2.245 1.787 3.999 3.927 4.413 6.91.662 4.76-2.048 10.316-7.694 11.236-5.988.976-10.275-2.276-11.186-8.378-.408-2.734.03-5.181 2.07-7.172.146-.143.373-.294.213-.522-.119-.17-.329-.033-.5.003-6.638 1.405-13.275 6.147-14.807 15.205-1.416 8.376 2.104 14.423 8.347 19.327.617.486 1.238.948 1.613 1.675.498.961.502 1.908-.033 2.852-.118.21-.276.403-.357.625-.117.317-.2.707.088.936.297.238.693.182 1.013-.035.4-.27.693-.656.986-1.043 1.426-1.876 1.56-4.043 1.493-6.294-.106-3.584-1.449-6.716-3.37-9.619-1.807-2.729-2.957-5.677-3.11-8.959-.17-3.636 1.112-6.755 3.558-9.399.326-.352.616-.737.923-1.108l.125.191Z"/></svg>
                <!-- å¹³å°åç§° -->
                <div style="font-size: 28px; color: #333;margin-left: 2px; font-weight:bold;">å±±ä¸œä¸­çƒŸç”Ÿäº§åˆ¶é€ æ™ºèƒ½ç®¡ç†ä¸€ä½“åŒ–å¹³å°</div>
            </div>
        </div>
        
        <!-- å¯¼èˆªæ åŒºåŸŸ -->
        <div style="padding: 5px 15px; border-bottom: 2px solid #1890ff;background-color: #ffffff;">
            <div style="display: flex; align-items: center;">
                <!-- å¼€å§‹é¡µæŒ‰é’®ï¼ˆå¸¦é¦–é¡µå›¾æ ‡ï¼‰ -->
                <div style="display: flex; align-items: center; padding: 8px 15px; background-color: #f0f0f0; border-radius: 4px; margin-right: 10px; cursor: pointer;">
                    <!-- é¦–é¡µå›¾æ ‡ -->
                    <svg width="12" height="12" viewBox="0 0 12 12" style="margin-right: 20px;">
                        <path d="M8.707 1.5a1 1 0 00-1.414 0L.646 8.146a.5.5 0 00.708.708L2 8.207V13.5A1.5 1.5 0 003.5 15h9a1.5 1.5 0 001.5-1.5V8.207l.646.647a.5.5 0 00.708-.708L13 5.793V2.5a.5.5 0 00-.5-.5h-1a.5.5 0 00-.5.5v1.293L8.707 1.5z" fill="#666"/>
                    </svg>
                    <span style="color: #666; font-size: 14px;">å¼€å§‹é¡µ</span>
                </div>
                
                <!-- å½“å‰æ ‡ç­¾é¡µæŒ‰é’®ï¼ˆæµ…è“è‰²åº•ï¼Œæ·±è“è‰²1pxåœ†è§’å¤–è¾¹æ¡†ï¼Œå³ä¸Šè§’å¸¦Xï¼‰ -->
                <div style="display: flex; align-items: center; padding: 8px 15px; background-color: #e6f7ff; border: 1px solid #1890ff; border-radius: 5px; cursor: pointer; position: relative;">
                    <span style="color: #1890ff; font-size: 14px; font-weight: bold;">äº¤æ¥ç­ç®¡ç†</span>
                    <!-- å³ä¸Šè§’Xå›¾æ ‡ -->
                    <svg width="12" height="12" viewBox="0 0 16 16" style="position: absolute; top: 2px; right: 2px; cursor: pointer;">
                        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" fill="#1890ff"/>
                    </svg>
                </div>
            </div>
        </div>
      <!-- é˜®å¤´éƒ¨åŒºåŸŸç»“æŸ -->

    <div class="container">
        <!-- æ“ä½œæŒ‰é’®æ  -->
        <div class="action-bar">
            <div class="action-buttons">
                <div class="role-selector">
                    <label for="userRole">å½“å‰è§’è‰²ï¼š</label>
                    <select id="userRole" onchange="changeUserRole()">
                        <option value="zhangjianguo">å¼ å»ºå›½ - åˆ¶ä¸è½¦é—´</option>
                        <option value="liminghua">ææ˜å - è®¾å¤‡ç»´æŠ¤éƒ¨</option>
                        <option value="wangjianguo">ç‹å»ºå›½ - ç”Ÿäº§éƒ¨</option>
                        <option value="zhangxiaoli">å¼ æ™“ä¸½ - è´¨æ£€éƒ¨</option>
                        <option value="liuwei">åˆ˜ä¼Ÿ - ä»“å‚¨éƒ¨</option>
                    </select>
                </div>
                <button class="btn btn-default" onclick="goBack()">
                    <i class="fas fa-arrow-left"></i> è¿”å›
                </button>
            </div>
            <div class="action-buttons" id="actionButtons">
                <!-- æŒ‰é’®å°†æ ¹æ®çŠ¶æ€åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- ä¸»ä¿¡æ¯åŒºï¼ˆé»˜è®¤æŠ˜å ï¼‰ -->
        <div class="card">
            <div class="card-header" onclick="toggleCard('basicInfo')">
                <h3><i class="fas fa-chevron-down"></i>å½“ç­åŸºæœ¬ä¿¡æ¯</h3>
                <span>
                    <span class="shift-info" id="shiftInfoDisplay">
                        <span id="shiftIcon" style="color: rgb(0, 0, 0); font-family: PingFangSC-Regular, Arial, sans-serif; font-size: 16px;">ğŸŒ</span>
                        <span id="shiftTypeDisplay">æ—©ç­</span>&nbsp; &nbsp; &nbsp; &nbsp; 
                        <span id="departmentDisplay">åˆ¶ä¸è½¦é—´</span>&nbsp; &nbsp; 
                        <span id="userNameDisplay">å¼ æ™“åˆ©</span>
                    </span>
                    <span class="status-text" id="statusDisplay">äº¤ç­å¡«æŠ¥ä¸­</span>
                </span>
            </div>
            <div id="basicInfo" class="card-body collapsed">
                <div class="basic-info">
                    <div class="info-item">
                        <div class="info-label">æœºå°</div>
                        <div class="info-value">3å·è®¾å¤‡</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">æœºå‹</div>
                        <div class="info-value">PRO-3000å‹</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">éƒ¨é—¨</div>
                        <div class="info-value" id="departmentInfo">åˆ¶ä¸è½¦é—´</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">å²—ä½</div>
                        <div class="info-value">ç»´ä¿®å·¥</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">è´£ä»»äºº</div>
                        <div class="info-value" id="responsiblePerson">å¼ å»ºå›½</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ç­ç»„</div>
                        <div class="info-value" id="teamInfo">åˆ¶ä¸è½¦é—´</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ç­æ¬¡</div>
                        <div class="info-value" id="shiftInfo">æ—©ç­</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">äº¤ç­æ—¶é—´</div>
                        <div class="info-value">2023-11-01 08:00</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">äº¤ç­äºº</div>
                        <div class="info-value" id="shiftPerson">å¼ å»ºå›½</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">æ¥ç­äºº</div>
                        <div class="info-value" id="successorPerson">ææ˜å</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">æ¥ç­æ—¶é—´</div>
                        <div class="info-value" id="successorTime">2023-11-01 08:00</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">å…³é—­äºº</div>
                        <div class="info-value" id="closePerson">-</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">å…³é—­æ—¶é—´</div>
                        <div class="info-value" id="closeTime">-</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">çŠ¶æ€</div>
                        <div class="info-value" id="statusInfo">å¡«æŠ¥ä¸­</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- é‡ç‚¹äº‹é¡¹åŒºï¼ˆé»˜è®¤å±•å¼€ï¼‰ -->
        <div class="card">
            <div class="card-header" onclick="toggleCard('priorityTasks')">
                <h3><i class="fas fa-exclamation-circle"></i> ç´§æ€¥ä»£åŠ</h3>
            </div>
            <div id="priorityTasks" class="card-body">
                <div class="sort-controls">
                    <div class="priority-stats">
                        <div class="priority-stat-item high">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>é«˜ä¼˜å…ˆçº§</span>
                            <span class="priority-stat-count" id="highPriorityCount">0</span>
                        </div>
                        <div class="priority-stat-item medium">
                            <i class="fas fa-exclamation-circle"></i>
                            <span>ä¸­ä¼˜å…ˆçº§</span>
                            <span class="priority-stat-count" id="mediumPriorityCount">0</span>
                        </div>
                        <div class="priority-stat-item low">
                            <i class="fas fa-info-circle"></i>
                            <span>ä½ä¼˜å…ˆçº§</span>
                            <span class="priority-stat-count" id="lowPriorityCount">0</span>
                        </div>
                    </div>
                    <select id="sortSelect" onchange="sortTasks()">
                        <option value="priority">æŒ‰ä¼˜å…ˆçº§æ’åº</option>
                        <option value="deadline">æŒ‰æˆªæ­¢æ—¶é—´æ’åº</option>
                        <option value="assignee">æŒ‰è´£ä»»äººæ’åº</option>
                    </select>
                </div>
                
                <div id="urgentTasks">
                    <div class="task-item priority-high" data-priority="high" data-deadline="2025-04-05T18:00">
                        <div class="task-info">
                            <div class="task-title">
                                <span class="priority-badge high">é«˜</span>
                                SDZY-SC-3002ï¼ˆåˆ¶ä¸çº¿ RC4 ç³»åˆ—åˆ‡ä¸æœºï¼‰è¿è¡ŒæŒ¯åŠ¨å¼‚å¸¸ä¸”æ³¢åŠ¨å¤§ï¼Œè¶…æ­£å¸¸èŒƒå›´ï¼Œæœ‰æŸå®³æ ¸å¿ƒéƒ¨ä»¶é£é™©ï¼Œéœ€ä¸“äººæ¯åŠå°æ—¶è®°å½•æ•°æ®ã€‚
                            </div>
                            <div class="task-meta">
                                è´£ä»»äººï¼šç‹å·¥ | æˆªæ­¢ï¼šä»Šæ—¥18:00
                            </div>
                        </div>
                        <div class="task-actions">
                            <button class="btn btn-white btn-sm" onclick="markComplete(this)">
                                <i class="fas fa-check"></i> å®Œæˆ
                            </button>
                            <button class="btn btn-white btn-sm" onclick="transferTask(this)">
                                <i class="fas fa-exchange-alt"></i> è½¬äº¤
                            </button>
                            <button class="btn btn-white btn-sm" onclick="delayTask(this)">
                                <i class="fas fa-clock"></i> å»¶æœŸ
                            </button>
                        </div>
                    </div>
                    
                    <div class="task-item priority-medium" data-priority="medium" data-deadline="2025-04-05T20:00">
                        <div class="task-info">
                            <div class="task-title">
                                <span class="priority-badge medium">ä¸­</span>
                                SDZY-SC-5001ï¼ˆå·æ¥æœºç»„ PROTOS-M5 å·çƒŸæœºï¼‰ä¼ é€å¸¦è¿è½¬å‘æŒç»­å°–é”å¼‚å“ï¼Œæ’é™¤å¼‚ç‰©å¡é¡¿ï¼Œç–‘æ»šè½®è½´æ‰¿ç£¨æŸï¼Œå·²è”ç³»ç»´ä¿®ä»Šæ—¥æ£€ä¿®ã€‚
                            </div>
                            <div class="task-meta">
                                è´£ä»»äººï¼šæå·¥ | æˆªæ­¢ï¼šä»Šæ—¥20:00
                            </div>
                        </div>
                        <div class="task-actions">
                            <button class="btn btn-white btn-sm" onclick="markComplete(this)">
                                <i class="fas fa-check"></i> å®Œæˆ
                            </button>
                            <button class="btn btn-white btn-sm" onclick="transferTask(this)">
                                <i class="fas fa-exchange-alt"></i> è½¬äº¤
                            </button>
                            <button class="btn btn-white btn-sm" onclick="delayTask(this)">
                                <i class="fas fa-clock"></i> å»¶æœŸ
                            </button>
                        </div>
                    </div>
                    
                    <div class="task-item priority-low" data-priority="low" data-deadline="2025-04-06T12:00">
                        <div class="task-info">
                            <div class="task-title">
                                <span class="priority-badge low">ä½</span>
                               SDZY-BY-7003ï¼ˆåŒ…è£…çº¿ FOCKE 350 å°ç›’åŒ…è£…æœºå¤‡ç”¨è½´æ‰¿ï¼‰åº“å­˜è¿œä½äºå®‰å…¨çº¿ï¼Œè¿˜å«è¯¥æœºå‹ä¸“ç”¨å¯†å°åœˆï¼Œä»…å¤Ÿåº”æ€¥æ›´æ¢ï¼Œä¸è¡¥åº“å°†å½±å“è®¾å¤‡ç»´ä¿®ã€‚
                            </div>
                            <div class="task-meta">
                                è´£ä»»äººï¼šèµµå·¥ | æˆªæ­¢ï¼šæ˜æ—¥12:00
                            </div>
                        </div>
                        <div class="task-actions">
                            <button class="btn btn-white btn-sm" onclick="markComplete(this)">
                                <i class="fas fa-check"></i> å®Œæˆ
                            </button>
                            <button class="btn btn-white btn-sm" onclick="transferTask(this)">
                                <i class="fas fa-exchange-alt"></i> è½¬äº¤
                            </button>
                            <button class="btn btn-white btn-sm" onclick="delayTask(this)">
                                <i class="fas fa-clock"></i> å»¶æœŸ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- é—®é¢˜æ¸…å•åŒºï¼ˆé»˜è®¤æŠ˜å ï¼‰ -->
        <div class="card">
            <div class="card-header" onclick="toggleCard('problemList')">
                <h3><i class="fas fa-chevron-down"></i> é—®é¢˜æ¸…å•</h3>
            </div>
            <div id="problemList" class="card-body collapsed">
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('handledProblems')">
                        å½“ç­å·²å¤„ç†é—®é¢˜
                        <span class="tab-count" id="handledCount">1</span>
                    </div>
                    <div class="tab" onclick="switchTab('pendingProblems')">
                        äº¤ç­å¾…å¤„ç†é—®é¢˜
                        <span class="tab-count" id="pendingCount">2</span>
                    </div>
                    <div class="tab" onclick="switchTab('legacyProblems')">
                        é—ç•™é—®é¢˜
                        <span class="tab-count" id="legacyCount">1</span>
                    </div>
                    <button class="add-problem-btn" onclick="showAddProblemModal()">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                
                <!-- å½“ç­å·²å¤„ç†é—®é¢˜ -->
                <div id="handledProblems" class="tab-content active">
                    <div class="problem-list">
                        <div class="problem-list-item">
                            <div class="problem-info">
                                <div class="problem-title">
                                    5å·ä¼ é€å¸¦å¼‚å“
                                    <span class="problem-status resolved">
                                        <i class="fas fa-check-circle"></i> å·²å®Œæˆ
                                    </span>
                                </div>
                                <div class="problem-description">
                                    SDZY-SC-5001ï¼ˆå·æ¥æœºç»„ PROTOS-M5 å·çƒŸæœºï¼‰ä¼ é€å¸¦å› è½´æ‰¿ç£¨æŸå¼‚å“ï¼Œæ¢ä»¶åé‡å¯æµ‹è¯•ï¼Œå¼‚å“æ¶ˆå¤±ï¼Œå‚æ•°æ¢å¤æ­£å¸¸ã€‚
                                </div>
                                <div class="problem-toggle" onclick="toggleProblemDetails(this)">
                                    æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="problem-details">
                                    <div class="problem-details-grid">
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">è®¾å¤‡åç§°</div>
                                            <div class="problem-detail-value">5å·ä¼ é€å¸¦</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">è®¾å¤‡ç¼–ç </div>
                                            <div class="problem-detail-value">EQ-005</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">é—®é¢˜ç±»å‹</div>
                                            <div class="problem-detail-value">æœºæ¢°æ•…éšœ</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">ç»´ä¿®å†…å®¹</div>
                                            <div class="problem-detail-value">æ›´æ¢è½´æ‰¿</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">å‘ç”Ÿæ—¶é—´</div>
                                            <div class="problem-detail-value">2023-11-01 07:30</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">ç»´ä¿®äºº</div>
                                            <div class="problem-detail-value">å¼ å»ºå›½</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">ç»´ä¿®å¼€å§‹æ—¶é—´</div>
                                            <div class="problem-detail-value">2023-11-01 07:35</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">ç»´ä¿®ç»“æŸæ—¶é—´</div>
                                            <div class="problem-detail-value">2023-11-01 07:45</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">éªŒæ”¶ç»“æœ</div>
                                            <div class="problem-detail-value">åˆæ ¼</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">éªŒæ”¶äºº</div>
                                            <div class="problem-detail-value">ææ˜å</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">éªŒæ”¶æ—¶é—´</div>
                                            <div class="problem-detail-value">2023-11-01 07:50</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="problem-actions">
                                <button class="btn-transfer" onclick="transferToLedger(this)">
                                    <i class="fas fa-exchange-alt"></i> è½¬å…¥å¼‚å¸¸éšæ‚£å°è´¦
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- äº¤ç­å¾…å¤„ç†é—®é¢˜ -->
                <div id="pendingProblems" class="tab-content">
                    <div class="problem-list">
                        <div class="problem-list-item">
                            <div class="problem-info">
                                <div class="problem-title">
                                    2å·è®¾å¤‡æ¶¦æ»‘ä¸è¶³
                                    <span class="problem-status pending">
                                        <i class="fas fa-exclamation-circle"></i> å¾…å¤„ç†
                                    </span>
                                </div>
                                <div class="problem-description">
                                    è®¾å¤‡è¿è¡Œæ—¶æ¸©åº¦åé«˜ï¼Œæ£€æŸ¥å‘ç°æ¶¦æ»‘ç³»ç»Ÿæ²¹é‡ä¸è¶³ï¼Œéœ€è¦è¡¥å……æ¶¦æ»‘æ²¹ã€‚
                                </div>
                                <div class="problem-toggle" onclick="toggleProblemDetails(this)">
                                    æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="problem-details">
                                    <div class="problem-details-grid">
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">è®¾å¤‡åç§°</div>
                                            <div class="problem-detail-value">2å·è®¾å¤‡</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">è®¾å¤‡ç¼–ç </div>
                                            <div class="problem-detail-value">EQ-002</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">é—®é¢˜ç±»å‹</div>
                                            <div class="problem-detail-value">æ¶¦æ»‘é—®é¢˜</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">å‘ç”Ÿæ—¶é—´</div>
                                            <div class="problem-detail-value">2023-11-01 08:15</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">è´£ä»»äºº</div>
                                            <div class="problem-detail-value">ç‹å·¥</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="problem-actions">
                                <button class="btn-edit" onclick="editProblem(this)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-confirm" onclick="confirmProblem(this)">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button class="btn-view" onclick="viewProblem(this)">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn-delete" onclick="deleteProblem(this)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="problem-list-item">
                            <div class="problem-info">
                                <div class="problem-title">
                                    å¤‡ç”¨é›¶ä»¶åº“å­˜ä¸è¶³
                                    <span class="problem-status pending">
                                        <i class="fas fa-exclamation-circle"></i> å¾…å¤„ç†
                                    </span>
                                </div>
                                <div class="problem-description">
                                    ä»“åº“æ£€æŸ¥å‘ç°å¤šç§å…³é”®å¤‡ç”¨é›¶ä»¶åº“å­˜ä½äºå®‰å…¨æ°´å¹³ï¼Œéœ€è¦åŠæ—¶è¡¥å……ã€‚
                                </div>
                                <div class="problem-toggle" onclick="toggleProblemDetails(this)">
                                    æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="problem-details">
                                    <div class="problem-details-grid">
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">è®¾å¤‡åç§°</div>
                                            <div class="problem-detail-value">ä»“åº“</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">é—®é¢˜ç±»å‹</div>
                                            <div class="problem-detail-value">åº“å­˜é—®é¢˜</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">å‘ç”Ÿæ—¶é—´</div>
                                            <div class="problem-detail-value">2023-11-01 09:00</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">è´£ä»»äºº</div>
                                            <div class="problem-detail-value">èµµå·¥</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="problem-actions">
                                <button class="btn-edit" onclick="editProblem(this)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-confirm" onclick="confirmProblem(this)">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button class="btn-view" onclick="viewProblem(this)">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn-delete" onclick="deleteProblem(this)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- é—ç•™é—®é¢˜ -->
                <div id="legacyProblems" class="tab-content">
                    <div class="problem-list">
                        <div class="problem-list-item">
                            <div class="problem-info">
                                <div class="problem-title">
                                    1å·è®¾å¤‡æ§åˆ¶ç³»ç»Ÿå‡çº§
                                    <span class="problem-status in-progress">
                                        <i class="fas fa-spinner"></i> å¤„ç†ä¸­
                                    </span>
                                </div>
                                <div class="problem-description">
                                    è®¾å¤‡æ§åˆ¶ç³»ç»Ÿç‰ˆæœ¬è¿‡æ—§ï¼Œéœ€è¦å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ä»¥æé«˜ç¨³å®šæ€§å’ŒåŠŸèƒ½æ€§ã€‚
                                </div>
                                <div class="problem-toggle" onclick="toggleProblemDetails(this)">
                                    æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="problem-details">
                                    <div class="problem-details-grid">
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">è®¾å¤‡åç§°</div>
                                            <div class="problem-detail-value">1å·è®¾å¤‡</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">è®¾å¤‡ç¼–ç </div>
                                            <div class="problem-detail-value">EQ-001</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">é—®é¢˜ç±»å‹</div>
                                            <div class="problem-detail-value">ç³»ç»Ÿå‡çº§</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">å‘ç”Ÿæ—¶é—´</div>
                                            <div class="problem-detail-value">2023-10-25 14:00</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">å¤„ç†äºº</div>
                                            <div class="problem-detail-value">æå·¥</div>
                                        </div>
                                        <div class="problem-detail-item">
                                            <div class="problem-detail-label">é¢„è®¡å®Œæˆæ—¶é—´</div>
                                            <div class="problem-detail-value">2023-11-05 17:00</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="problem-actions">
                                <button class="btn-edit" onclick="editProblem(this)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-confirm" onclick="confirmProblem(this)">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button class="btn-view" onclick="viewProblem(this)">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn-delete" onclick="deleteProblem(this)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- æäº¤äº¤ç­æ¨¡æ€æ¡† -->
    <div id="submitShiftModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æäº¤äº¤ç­</h3>
                <button class="modal-close" onclick="closeSubmitModal()">Ã—</button>
            </div>
            <div class="modal-body">
<div class="form-row">
                <div class="form-group">
                    <label for="successor">æ¥ç­äºº</label>
                    <select id="successor" class="form-control">
                        <option value="">è¯·é€‰æ‹©æ¥ç­äºº</option>
                        <option value="ææ˜å">ææ˜å</option>
                        <option value="ç‹å»ºå›½">ç‹å»ºå›½</option>
                        <option value="å¼ æ™“ä¸½">å¼ æ™“ä¸½</option>
                        <option value="åˆ˜ä¼Ÿ">åˆ˜ä¼Ÿ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="shiftTime">æ¥ç­ç­æ¬¡</label>
                    <select id="shiftTime" class="form-control">
                        <option value="">è¯·é€‰æ‹©ç­æ¬¡</option>
                        <option value="æ—©ç­ï¼š8:00-12:00">æ—©ç­ï¼š8:00-12:00</option>
                        <option value="ä¸­ç­ï¼š12:00-18:00">ä¸­ç­ï¼š12:00-18:00</option>
                        <option value="æ™šç­ï¼š18:00-24:00">æ™šç­ï¼š18:00-24:00</option>
                        <option value="å¤œç­ï¼š0:00-8:00">å¤œç­ï¼š0:00-8:00</option>
                    </select>
                </div>
                </div>
                <div class="form-group">
                    <label for="keyPoints">é‡ç‚¹äº‹é¡¹</label>
                    <textarea id="keyPoints" class="form-control" placeholder="è¯·è¾“å…¥é‡ç‚¹äº‹é¡¹ï¼Œå¦‚è®¾å¤‡è¿è¡Œæƒ…å†µã€éœ€è¦ç‰¹åˆ«å…³æ³¨çš„é—®é¢˜ç­‰"></textarea>
                </div>
                <div class="form-group">
                    <label for="safetyStatus">å®‰å…¨æƒ…å†µ</label>
                    <textarea id="safetyStatus" class="form-control" placeholder="è¯·è¾“å…¥å®‰å…¨æƒ…å†µï¼Œå¦‚å®‰å…¨éšæ‚£ã€å®‰å…¨æªæ–½æ‰§è¡Œæƒ…å†µç­‰"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-white" onclick="closeSubmitModal()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="confirmSubmitShift()">ç¡®è®¤æäº¤</button>
            </div>
        </div>
    </div>
    
    <!-- æ·»åŠ é—®é¢˜æ¨¡æ€æ¡† -->
    <div id="addProblemModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ·»åŠ é—®é¢˜</h3>
                <button class="modal-close" onclick="closeAddProblemModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="problemTitle">é—®é¢˜æ ‡é¢˜</label>
                    <input type="text" id="problemTitle" class="form-control" placeholder="è¯·è¾“å…¥é—®é¢˜æ ‡é¢˜">
                </div>
                <div class="form-group">
                    <label for="problemDevice">è®¾å¤‡åç§°</label>
                    <input type="text" id="problemDevice" class="form-control" placeholder="è¯·è¾“å…¥è®¾å¤‡åç§°">
                </div>
                <div class="form-group">
                    <label for="problemDeviceCode">è®¾å¤‡ç¼–ç </label>
                    <input type="text" id="problemDeviceCode" class="form-control" placeholder="è¯·è¾“å…¥è®¾å¤‡ç¼–ç ">
                </div>
                <div class="form-group">
                    <label for="problemType">é—®é¢˜ç±»å‹</label>
                    <select id="problemType" class="form-control">
                        <option value="">è¯·é€‰æ‹©é—®é¢˜ç±»å‹</option>
                        <option value="æœºæ¢°æ•…éšœ">æœºæ¢°æ•…éšœ</option>
                        <option value="ç”µæ°”æ•…éšœ">ç”µæ°”æ•…éšœ</option>
                        <option value="æ¶¦æ»‘é—®é¢˜">æ¶¦æ»‘é—®é¢˜</option>
                        <option value="ç³»ç»Ÿå‡çº§">ç³»ç»Ÿå‡çº§</option>
                        <option value="åº“å­˜é—®é¢˜">åº“å­˜é—®é¢˜</option>
                        <option value="å…¶ä»–">å…¶ä»–</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="problemStatus">é—®é¢˜çŠ¶æ€</label>
                    <select id="problemStatus" class="form-control">
                        <option value="resolved">å·²å®Œæˆ</option>
                        <option value="pending">å¾…å¤„ç†</option>
                        <option value="in-progress">å¤„ç†ä¸­</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="problemDescription">é—®é¢˜æè¿°</label>
                    <textarea id="problemDescription" class="form-control" placeholder="è¯·è¾“å…¥é—®é¢˜æè¿°"></textarea>
                </div>
                <div class="form-group">
                    <label for="problemResponsible">è´£ä»»äºº</label>
                    <input type="text" id="problemResponsible" class="form-control" placeholder="è¯·è¾“å…¥è´£ä»»äºº">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-white" onclick="closeAddProblemModal()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="addProblem()">ç¡®è®¤æ·»åŠ </button>
            </div>
        </div>
    </div>
    
    <div id="notification" class="notification">
        æ“ä½œæˆåŠŸï¼
    </div>
    
    <script>
        // è§’è‰²æ•°æ®
        const roles = {
            zhangjianguo: {
                name: 'å¼ å»ºå›½',
                department: 'åˆ¶ä¸è½¦é—´',
                team: 'åˆ¶ä¸è½¦é—´'
            },
            liminghua: {
                name: 'ææ˜å',
                department: 'è®¾å¤‡ç»´æŠ¤éƒ¨',
                team: 'è®¾å¤‡ç»´æŠ¤éƒ¨'
            },
            wangjianguo: {
                name: 'ç‹å»ºå›½',
                department: 'ç”Ÿäº§éƒ¨',
                team: 'ç”Ÿäº§éƒ¨'
            },
            zhangxiaoli: {
                name: 'å¼ æ™“ä¸½',
                department: 'è´¨æ£€éƒ¨',
                team: 'è´¨æ£€éƒ¨'
            },
            liuwei: {
                name: 'åˆ˜ä¼Ÿ',
                department: 'ä»“å‚¨éƒ¨',
                team: 'ä»“å‚¨éƒ¨'
            }
        };
        
        // ç­æ¬¡å›¾æ ‡æ˜ å°„
        const shiftIcons = {
            'æ—©ç­ï¼š8:00-12:00': 'ğŸŒ',
            'ä¸­ç­ï¼š12:00-18:00': 'â˜€ï¸',
            'æ™šç­ï¼š18:00-24:00': 'ğŸŒ™',
            'å¤œç­ï¼š0:00-8:00': 'ğŸŒƒ'
        };
        
        // ç­æ¬¡åç§°æ˜ å°„
        const shiftNames = {
            'æ—©ç­ï¼š8:00-12:00': 'æ—©ç­',
            'ä¸­ç­ï¼š12:00-18:00': 'ä¸­ç­',
            'æ™šç­ï¼š18:00-24:00': 'æ™šç­',
            'å¤œç­ï¼š0:00-8:00': 'å¤œç­'
        };
        
        // å½“å‰ç™»å½•è§’è‰²
        let currentRole = 'zhangjianguo';
        
        // é¡µé¢çŠ¶æ€ç®¡ç†
        let pageState = {
            status: 'draft', // draft: å¡«æŠ¥ä¸­, pending: å¾…ç¡®è®¤, completed: å·²å®Œæˆ, closed: å·²å…³é—­
            isEditing: false
        };
        
        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            // æ¢å¤ç”¨æˆ·åå¥½
            restoreUserPreferences();
            
            // è®¾ç½®å½“å‰è§’è‰²
            const savedRole = localStorage.getItem('current_role');
            if (savedRole && roles[savedRole]) {
                currentRole = savedRole;
                document.getElementById('userRole').value = savedRole;
            }
            
            // æ›´æ–°è§’è‰²ä¿¡æ¯æ˜¾ç¤º
            updateRoleDisplay();
            
            // æ¸²æŸ“æ“ä½œæŒ‰é’®
            renderActionButtons();
            
            // é«˜äº®å³å°†è¶…æ—¶çš„ä»»åŠ¡
            highlightUrgentTasks();
            
            // æ›´æ–°ä¼˜å…ˆçº§ç»Ÿè®¡
            updatePriorityStats();
            
            // æ›´æ–°é—®é¢˜æ•°é‡
            updateProblemCounts();
        });
        
        // æ›´æ–°è§’è‰²ä¿¡æ¯æ˜¾ç¤º
        function updateRoleDisplay() {
            const role = roles[currentRole];
            document.getElementById('userNameDisplay').textContent = role.name;
            document.getElementById('departmentDisplay').textContent = role.department;
            document.getElementById('departmentInfo').textContent = role.department;
            document.getElementById('responsiblePerson').textContent = role.name;
            document.getElementById('teamInfo').textContent = role.team;
            document.getElementById('shiftPerson').textContent = role.name;
        }
        
        // åˆ‡æ¢ç”¨æˆ·è§’è‰²
        function changeUserRole() {
            const selectElement = document.getElementById('userRole');
            currentRole = selectElement.value;
            
            // ä¿å­˜å½“å‰è§’è‰²
            localStorage.setItem('current_role', currentRole);
            
            // æ›´æ–°è§’è‰²ä¿¡æ¯æ˜¾ç¤º
            updateRoleDisplay();
            
            // æ˜¾ç¤ºé€šçŸ¥
            const role = roles[currentRole];
            showNotification(`å·²åˆ‡æ¢åˆ°è§’è‰²ï¼š${role.name} - ${role.department}`);
        }
        
        // æ¸²æŸ“æ“ä½œæŒ‰é’®
        function renderActionButtons() {
            const actionButtonsContainer = document.getElementById('actionButtons');
            
            // æ¸…ç©ºæŒ‰é’®å®¹å™¨
            actionButtonsContainer.innerHTML = '';
            
            // æ ¹æ®çŠ¶æ€æ¸²æŸ“ä¸åŒæŒ‰é’®
            switch(pageState.status) {
                case 'draft':
                    // ä¿®æ”¹æŒ‰é’®
                    actionButtonsContainer.appendChild(createButton('ä¿®æ”¹', 'fas fa-edit', 'btn-primary', toggleEdit));
                    
                    // ä¿å­˜è‰ç¨¿æŒ‰é’®
                    actionButtonsContainer.appendChild(createButton('ä¿å­˜è‰ç¨¿', 'fas fa-save', 'btn-white', saveDraft));
                    
                    // æäº¤äº¤ç­æŒ‰é’®ï¼ˆå¸¦é«˜äº®æ ‡è®°ï¼‰
                    const submitBtn = createButton('æäº¤äº¤ç­', 'fas fa-paper-plane', 'btn-primary btn-highlight', showSubmitModal);
                    actionButtonsContainer.appendChild(submitBtn);
                    
                    // å†å²äº¤ç­æŒ‰é’®
                    actionButtonsContainer.appendChild(createButton('å†å²äº¤ç­', 'fas fa-history', 'btn-info', viewHistory));
                    break;
                    
                case 'pending':
                    // ç¡®è®¤æ¥ç­æŒ‰é’®
                    actionButtonsContainer.appendChild(createButton('ç¡®è®¤æ¥ç­', 'fas fa-check-circle', 'btn-primary', confirmShift));
                    
                    // é€€å›ä¿®æ”¹æŒ‰é’®
                    actionButtonsContainer.appendChild(createButton('é€€å›ä¿®æ”¹', 'fas fa-undo', 'btn-white', returnForEdit));
                    
                    // å†å²äº¤ç­æŒ‰é’®
                    actionButtonsContainer.appendChild(createButton('å†å²äº¤ç­', 'fas fa-history', 'btn-info', viewHistory));
                    break;
                    
                case 'completed':
                    // æ ¸å®å…³é—­æŒ‰é’®
                    actionButtonsContainer.appendChild(createButton('æ ¸å®å…³é—­', 'fas fa-times-circle', 'btn-primary', closeShift));
                    
                    // å†å²äº¤ç­æŒ‰é’®
                    actionButtonsContainer.appendChild(createButton('å†å²äº¤ç­', 'fas fa-history', 'btn-info', viewHistory));
                    break;
                    
                case 'closed':
                    // å·²å…³é—­çŠ¶æ€åªæ˜¾ç¤ºå†å²äº¤ç­æŒ‰é’®
                    actionButtonsContainer.appendChild(createButton('å†å²äº¤ç­', 'fas fa-history', 'btn-info', viewHistory));
                    break;
            }
        }
        
        // åˆ›å»ºæŒ‰é’®
        function createButton(text, iconClass, className, onClickHandler) {
            const button = document.createElement('button');
            button.className = `btn ${className}`;
            button.innerHTML = `<i class="${iconClass}"></i> ${text}`;
            button.onclick = onClickHandler;
            return button;
        }
        
        // è¿”å›æ“ä½œ
        function goBack() {
            showNotification('è¿”å›ä¸Šä¸€é¡µ');
            // å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæ‰§è¡Œé¡µé¢è·³è½¬
        }
        
        // åˆ‡æ¢ç¼–è¾‘æ¨¡å¼
        function toggleEdit() {
            pageState.isEditing = !pageState.isEditing;
            if (pageState.isEditing) {
                showNotification('å·²è¿›å…¥ç¼–è¾‘æ¨¡å¼');
                // å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šå¯ç”¨è¡¨å•ç¼–è¾‘
            } else {
                showNotification('å·²é€€å‡ºç¼–è¾‘æ¨¡å¼');
                // å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šç¦ç”¨è¡¨å•ç¼–è¾‘
            }
        }
        
        // ä¿å­˜è‰ç¨¿
        function saveDraft() {
            showNotification('è‰ç¨¿å·²ä¿å­˜');
            // å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šä¿å­˜è¡¨å•æ•°æ®ä¸ºè‰ç¨¿
        }
        
        // æ˜¾ç¤ºæäº¤äº¤ç­æ¨¡æ€æ¡†
        function showSubmitModal() {
            document.getElementById('submitShiftModal').classList.add('show');
        }
        
        // å…³é—­æäº¤äº¤ç­æ¨¡æ€æ¡†
        function closeSubmitModal() {
            document.getElementById('submitShiftModal').classList.remove('show');
        }
        
        // ç¡®è®¤æäº¤äº¤ç­
        function confirmSubmitShift() {
            const successor = document.getElementById('successor').value;
            const shiftTime = document.getElementById('shiftTime').value;
            const keyPoints = document.getElementById('keyPoints').value;
            const safetyStatus = document.getElementById('safetyStatus').value;
            
            if (!successor) {
                showNotification('è¯·é€‰æ‹©æ¥ç­äºº');
                return;
            }
            
            if (!shiftTime) {
                showNotification('è¯·é€‰æ‹©æ¥ç­ç­æ¬¡');
                return;
            }
            
            if (!keyPoints) {
                showNotification('è¯·å¡«å†™é‡ç‚¹äº‹é¡¹');
                return;
            }
            
            if (!safetyStatus) {
                showNotification('è¯·å¡«å†™å®‰å…¨æƒ…å†µ');
                return;
            }
            
            // æ›´æ–°æ¥ç­äººå’Œæ¥ç­ç­æ¬¡
            document.getElementById('successorPerson').textContent = successor;
            document.getElementById('successorTime').textContent = new Date().toLocaleString();
            
            // æ›´æ–°å½“ç­åŸºæœ¬ä¿¡æ¯åé¢çš„æ˜¾ç¤º
            updateShiftInfoDisplay(successor, shiftTime);
            
            // å…³é—­æ¨¡æ€æ¡†
            closeSubmitModal();
            
            // æ‰§è¡Œæäº¤äº¤ç­æ“ä½œ
            if (confirm('ç¡®å®šè¦æäº¤äº¤ç­ä¿¡æ¯å—ï¼Ÿæäº¤åå°†è¿›å…¥å¾…ç¡®è®¤çŠ¶æ€ã€‚')) {
                pageState.status = 'pending';
                renderActionButtons();
                updateBasicInfoStatus();
                showNotification('äº¤ç­ä¿¡æ¯å·²æäº¤ï¼Œç­‰å¾…æ¥ç­äººç¡®è®¤');
            }
        }
        
        // æ›´æ–°å½“ç­åŸºæœ¬ä¿¡æ¯åé¢çš„æ˜¾ç¤º
        function updateShiftInfoDisplay(successor, shiftTime) {
            // è·å–æ¥ç­äººçš„éƒ¨é—¨ä¿¡æ¯
            let successorDepartment = '';
            for (const roleId in roles) {
                if (roles[roleId].name === successor) {
                    successorDepartment = roles[roleId].department;
                    break;
                }
            }
            
            // æ›´æ–°ç­æ¬¡å›¾æ ‡
            document.getElementById('shiftIcon').textContent = shiftIcons[shiftTime] || 'ğŸŒ';
            
            // æ›´æ–°ç­æ¬¡åç§°
            document.getElementById('shiftTypeDisplay').textContent = shiftNames[shiftTime] || 'æ—©ç­';
            
            // æ›´æ–°éƒ¨é—¨æ˜¾ç¤º
            document.getElementById('departmentDisplay').textContent = successorDepartment;
            
            // æ›´æ–°å§“åæ˜¾ç¤º
            document.getElementById('userNameDisplay').textContent = successor;
        }
        
        // ç¡®è®¤æ¥ç­
        function confirmShift() {
            if (confirm('ç¡®å®šè¦ç¡®è®¤æ¥ç­å—ï¼Ÿç¡®è®¤åå°†å®Œæˆäº¤æ¥ç­æµç¨‹ã€‚')) {
                pageState.status = 'completed';
                renderActionButtons();
                updateBasicInfoStatus();
                showNotification('æ¥ç­å·²ç¡®è®¤ï¼Œäº¤æ¥ç­æµç¨‹å·²å®Œæˆ');
            }
        }
        
        // é€€å›ä¿®æ”¹
        function returnForEdit() {
            if (confirm('ç¡®å®šè¦é€€å›ä¿®æ”¹å—ï¼Ÿé€€å›åäº¤ç­äººå¯ä»¥ç»§ç»­ç¼–è¾‘ã€‚')) {
                pageState.status = 'draft';
                renderActionButtons();
                updateBasicInfoStatus();
                showNotification('å·²é€€å›ç»™äº¤ç­äººä¿®æ”¹');
            }
        }
        
        // æ ¸å®å…³é—­
        function closeShift() {
            if (confirm('ç¡®å®šè¦æ ¸å®å…³é—­å—ï¼Ÿå…³é—­åå°†å½’æ¡£æ­¤äº¤æ¥ç­è®°å½•ã€‚')) {
                // æ›´æ–°å…³é—­äººå’Œå…³é—­æ—¶é—´
                const now = new Date();
                const formattedDate = now.getFullYear() + '-' + 
                    String(now.getMonth() + 1).padStart(2, '0') + '-' + 
                    String(now.getDate()).padStart(2, '0') + ' ' + 
                    String(now.getHours()).padStart(2, '0') + ':' + 
                    String(now.getMinutes()).padStart(2, '0');
                
                const role = roles[currentRole];
                document.getElementById('closePerson').textContent = role.name;
                document.getElementById('closeTime').textContent = formattedDate;
                
                // æ›´æ–°çŠ¶æ€ä¸º"å·²å…³é—­"
                pageState.status = 'closed';
                renderActionButtons();
                updateBasicInfoStatus();
                
                // æ›´æ–°ä¸ºå…³é—­çŠ¶æ€æ—¶çš„æ˜¾ç¤º
                updateClosedStateDisplay(role.name, role.department);
                
                showNotification('äº¤æ¥ç­è®°å½•å·²æ ¸å®å…³é—­');
                // å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæ‰§è¡Œå…³é—­æ“ä½œå¹¶å¯èƒ½è·³è½¬åˆ°åˆ—è¡¨é¡µ
            }
        }
        
        // æ›´æ–°å…³é—­çŠ¶æ€æ—¶çš„æ˜¾ç¤º
        function updateClosedStateDisplay(closerName, closerDepartment) {
            // éšè—ç­æ¬¡å›¾æ ‡å’Œåç§°
            document.getElementById('shiftIcon').style.display = 'none';
            document.getElementById('shiftTypeDisplay').style.display = 'none';
            
            // æ›´æ–°éƒ¨é—¨æ˜¾ç¤ºä¸ºå…³é—­äººçš„éƒ¨é—¨
            document.getElementById('departmentDisplay').textContent = closerDepartment;
            
            // æ›´æ–°å§“åæ˜¾ç¤ºä¸ºå…³é—­äººçš„å§“å
            document.getElementById('userNameDisplay').textContent = closerName;
        }
        
        // æŸ¥çœ‹å†å²äº¤ç­
        function viewHistory() {
            showNotification('æ­£åœ¨æŸ¥çœ‹å†å²äº¤ç­è®°å½•');
            // å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šè·³è½¬åˆ°å†å²äº¤ç­è®°å½•é¡µé¢
        }
        
        // æ›´æ–°åŸºæœ¬ä¿¡æ¯ä¸­çš„çŠ¶æ€
        function updateBasicInfoStatus() {
            const statusText = {
                'draft': 'å¡«æŠ¥ä¸­',
                'pending': 'å¾…ç¡®è®¤',
                'completed': 'å·²å®Œæˆ',
                'closed': 'å·²å…³é—­'
            };
            
            document.querySelector('#basicInfo .info-item:last-child .info-value').textContent = statusText[pageState.status];
            
            // æ›´æ–°å½“ç­åŸºæœ¬ä¿¡æ¯å³ä¾§çš„çŠ¶æ€æ˜¾ç¤º
            const statusSpan = document.querySelector('.status-text');
            statusSpan.textContent = statusText[pageState.status];
            
            // å¦‚æœçŠ¶æ€ä¸æ˜¯"å·²å…³é—­"ï¼Œç¡®ä¿ç­æ¬¡å›¾æ ‡å’Œåç§°æ˜¾ç¤º
            if (pageState.status !== 'closed') {
                document.getElementById('shiftIcon').style.display = 'inline';
                document.getElementById('shiftTypeDisplay').style.display = 'inline';
            }
        }
        
        // åˆ‡æ¢å¡ç‰‡å±•å¼€/æŠ˜å çŠ¶æ€
        function toggleCard(cardId) {
            const cardBody = document.getElementById(cardId);
            const cardHeader = cardBody.previousElementSibling;
            const icon = cardHeader.querySelector('i');
            
            cardBody.classList.toggle('collapsed');
            cardHeader.classList.toggle('collapsed');
            
            // ä¿å­˜ç”¨æˆ·åå¥½
            localStorage.setItem(cardId + '_collapsed', cardBody.classList.contains('collapsed'));
        }
        
        // æ ‡è®°ä»»åŠ¡å®Œæˆ
        function markComplete(button) {
            const taskItem = button.closest('.task-item');
            const taskTitle = taskItem.querySelector('.task-title').textContent;
            
            // æ·»åŠ å®ŒæˆåŠ¨ç”»æ•ˆæœ
            taskItem.style.opacity = '0.5';
            taskItem.style.textDecoration = 'line-through';
            
            // ç¦ç”¨æŒ‰é’®
            button.disabled = true;
            button.textContent = 'å·²å®Œæˆ';
            
            // æ›´æ–°ä¼˜å…ˆçº§ç»Ÿè®¡
            updatePriorityStats();
            
            // æ˜¾ç¤ºé€šçŸ¥
            showNotification(`ä»»åŠ¡"${taskTitle}"å·²æ ‡è®°ä¸ºå®Œæˆï¼`);
        }
        
        // è½¬äº¤ä»»åŠ¡
        function transferTask(button) {
            const taskItem = button.closest('.task-item');
            const taskTitle = taskItem.querySelector('.task-title').textContent;
            
            // æ¨¡æ‹Ÿè½¬äº¤æ“ä½œ
            showNotification(`ä»»åŠ¡"${taskTitle}"å·²è½¬äº¤ï¼`);
        }
        
        // å»¶æœŸä»»åŠ¡
        function delayTask(button) {
            const taskItem = button.closest('.task-item');
            const taskTitle = taskItem.querySelector('.task-title').textContent;
            
            // æ¨¡æ‹Ÿå»¶æœŸæ“ä½œ
            showNotification(`ä»»åŠ¡"${taskTitle}"å·²ç”³è¯·å»¶æœŸï¼`);
        }
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // ä»»åŠ¡æ’åº
        function sortTasks() {
            const sortValue = document.getElementById('sortSelect').value;
            const urgentTasks = document.getElementById('urgentTasks');
            const allTasks = [...urgentTasks.children];
            
            // æ ¹æ®é€‰æ‹©çš„æ’åºæ–¹å¼å¯¹ä»»åŠ¡è¿›è¡Œæ’åº
            allTasks.sort((a, b) => {
                if (sortValue === 'priority') {
                    const priorityOrder = { high: 1, medium: 2, low: 3 };
                    const priorityA = a.getAttribute('data-priority');
                    const priorityB = b.getAttribute('data-priority');
                    return priorityOrder[priorityA] - priorityOrder[priorityB];
                } else if (sortValue === 'deadline') {
                    const deadlineA = new Date(a.getAttribute('data-deadline'));
                    const deadlineB = new Date(b.getAttribute('data-deadline'));
                    return deadlineA - deadlineB;
                } else if (sortValue === 'assignee') {
                    const assigneeA = a.querySelector('.task-meta').textContent.match(/è´£ä»»äººï¼š(.+?)\s/)[1];
                    const assigneeB = b.querySelector('.task-meta').textContent.match(/è´£ä»»äººï¼š(.+?)\s/)[1];
                    return assigneeA.localeCompare(assigneeB);
                }
                return 0;
            });
            
            // é‡æ–°æ’åˆ—ä»»åŠ¡
            allTasks.forEach(task => {
                urgentTasks.appendChild(task);
            });
            
            // ä¿å­˜æ’åºåå¥½
            localStorage.setItem('task_sort_preference', sortValue);
        }
        
        // æ›´æ–°ä¼˜å…ˆçº§ç»Ÿè®¡
        function updatePriorityStats() {
            const tasks = document.querySelectorAll('#urgentTasks .task-item');
            let highCount = 0;
            let mediumCount = 0;
            let lowCount = 0;
            
            tasks.forEach(task => {
                const priority = task.getAttribute('data-priority');
                // åªç»Ÿè®¡æœªå®Œæˆçš„ä»»åŠ¡
                if (!task.querySelector('button[disabled]')) {
                    if (priority === 'high') highCount++;
                    else if (priority === 'medium') mediumCount++;
                    else if (priority === 'low') lowCount++;
                }
            });
            
            document.getElementById('highPriorityCount').textContent = highCount;
            document.getElementById('mediumPriorityCount').textContent = mediumCount;
            document.getElementById('lowPriorityCount').textContent = lowCount;
        }
        
        // æ¢å¤ç”¨æˆ·åå¥½
        function restoreUserPreferences() {
            // æ¢å¤å¡ç‰‡æŠ˜å çŠ¶æ€
            const cardIds = ['basicInfo', 'priorityTasks', 'problemList'];
            cardIds.forEach(cardId => {
                const cardBody = document.getElementById(cardId);
                const cardHeader = cardBody.previousElementSibling;
                const isCollapsed = localStorage.getItem(cardId + '_collapsed') === 'true';
                
                if (isCollapsed) {
                    cardBody.classList.add('collapsed');
                    cardHeader.classList.add('collapsed');
                }
            });
            
            // æ¢å¤æ’åºåå¥½
            const sortPreference = localStorage.getItem('task_sort_preference');
            if (sortPreference) {
                document.getElementById('sortSelect').value = sortPreference;
                sortTasks();
            }
        }
        
        // é«˜äº®å³å°†è¶…æ—¶çš„ä»»åŠ¡
        function highlightUrgentTasks() {
            const now = new Date();
            const tasks = document.querySelectorAll('.task-item');
            tasks.forEach(task => {
                const deadline = new Date(task.getAttribute('data-deadline'));
                const hoursUntilDeadline = (deadline - now) / (1000 * 60 * 60);
                
                if (hoursUntilDeadline < 3 && hoursUntilDeadline > 0) {
                    task.style.borderLeft = '4px solid var(--danger-color)';
                    task.style.backgroundColor = '#fff8f8';
                }
            });
        }
        
        // åˆ‡æ¢é—®é¢˜æ¸…å•æ ‡ç­¾é¡µ
        function switchTab(tabId) {
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„activeç±»
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // éšè—æ‰€æœ‰æ ‡ç­¾å†…å®¹
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });
            
            // æ¿€æ´»å½“å‰æ ‡ç­¾
            event.target.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }
        
        // åˆ‡æ¢é—®é¢˜è¯¦æƒ…å±•å¼€/æŠ˜å 
        function toggleProblemDetails(element) {
            const problemDetails = element.nextElementSibling;
            const icon = element.querySelector('i');
            
            problemDetails.classList.toggle('expanded');
            element.classList.toggle('expanded');
        }
        
        // æ›´æ–°é—®é¢˜æ•°é‡
        function updateProblemCounts() {
            const handledCount = document.querySelectorAll('#handledProblems .problem-list-item').length;
            const pendingCount = document.querySelectorAll('#pendingProblems .problem-list-item').length;
            const legacyCount = document.querySelectorAll('#legacyProblems .problem-list-item').length;
            
            document.getElementById('handledCount').textContent = handledCount;
            document.getElementById('pendingCount').textContent = pendingCount;
            document.getElementById('legacyCount').textContent = legacyCount;
        }
        
        // æ˜¾ç¤ºæ·»åŠ é—®é¢˜æ¨¡æ€æ¡†
        function showAddProblemModal() {
            document.getElementById('addProblemModal').classList.add('show');
        }
        
        // å…³é—­æ·»åŠ é—®é¢˜æ¨¡æ€æ¡†
        function closeAddProblemModal() {
            document.getElementById('addProblemModal').classList.remove('show');
            // æ¸…ç©ºè¡¨å•
            document.getElementById('problemTitle').value = '';
            document.getElementById('problemDevice').value = '';
            document.getElementById('problemDeviceCode').value = '';
            document.getElementById('problemType').value = '';
            document.getElementById('problemStatus').value = '';
            document.getElementById('problemDescription').value = '';
            document.getElementById('problemResponsible').value = '';
        }
        
        // æ·»åŠ é—®é¢˜
        function addProblem() {
            const title = document.getElementById('problemTitle').value;
            const device = document.getElementById('problemDevice').value;
            const deviceCode = document.getElementById('problemDeviceCode').value;
            const type = document.getElementById('problemType').value;
            const status = document.getElementById('problemStatus').value;
            const description = document.getElementById('problemDescription').value;
            const responsible = document.getElementById('problemResponsible').value;
            
            if (!title) {
                showNotification('è¯·è¾“å…¥é—®é¢˜æ ‡é¢˜');
                return;
            }
            
            if (!device) {
                showNotification('è¯·è¾“å…¥è®¾å¤‡åç§°');
                return;
            }
            
            if (!type) {
                showNotification('è¯·é€‰æ‹©é—®é¢˜ç±»å‹');
                return;
            }
            
            if (!description) {
                showNotification('è¯·è¾“å…¥é—®é¢˜æè¿°');
                return;
            }
            
            if (!responsible) {
                showNotification('è¯·è¾“å…¥è´£ä»»äºº');
                return;
            }
            
            // åˆ›å»ºæ–°é—®é¢˜é¡¹
            const newProblemItem = document.createElement('div');
            newProblemItem.className = 'problem-list-item';
            
            // æ ¹æ®çŠ¶æ€ç¡®å®šè¦æ·»åŠ åˆ°å“ªä¸ªæ ‡ç­¾é¡µ
            let targetTabId;
            let statusText;
            let statusClass;
            
            switch(status) {
                case 'resolved':
                    targetTabId = 'handledProblems';
                    statusText = 'å·²å®Œæˆ';
                    statusClass = 'resolved';
                    break;
                case 'pending':
                    targetTabId = 'pendingProblems';
                    statusText = 'å¾…å¤„ç†';
                    statusClass = 'pending';
                    break;
                case 'in-progress':
                    targetTabId = 'legacyProblems';
                    statusText = 'å¤„ç†ä¸­';
                    statusClass = 'in-progress';
                    break;
            }
            
            // æ„å»ºé—®é¢˜é¡¹HTML
            newProblemItem.innerHTML = `
                <div class="problem-info">
                    <div class="problem-title">
                        ${title}
                        <span class="problem-status ${statusClass}">
                            <i class="fas fa-${statusClass === 'resolved' ? 'check-circle' : (statusClass === 'pending' ? 'exclamation-circle' : 'spinner')}"></i> ${statusText}
                        </span>
                    </div>
                    <div class="problem-description">
                        ${description}
                    </div>
                    <div class="problem-toggle" onclick="toggleProblemDetails(this)">
                        æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="problem-details">
                        <div class="problem-details-grid">
                            <div class="problem-detail-item">
                                <div class="problem-detail-label">è®¾å¤‡åç§°</div>
                                <div class="problem-detail-value">${device}</div>
                            </div>
                            <div class="problem-detail-item">
                                <div class="problem-detail-label">è®¾å¤‡ç¼–ç </div>
                                <div class="problem-detail-value">${deviceCode}</div>
                            </div>
                            <div class="problem-detail-item">
                                <div class="problem-detail-label">é—®é¢˜ç±»å‹</div>
                                <div class="problem-detail-value">${type}</div>
                            </div>
                            <div class="problem-detail-item">
                                <div class="problem-detail-label">å‘ç”Ÿæ—¶é—´</div>
                                <div class="problem-detail-value">${new Date().toLocaleString()}</div>
                            </div>
                            <div class="problem-detail-item">
                                <div class="problem-detail-label">è´£ä»»äºº</div>
                                <div class="problem-detail-value">${responsible}</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="problem-actions">
                    ${status === 'resolved' ? 
                        `<button class="btn-transfer" onclick="transferToLedger(this)">
                            <i class="fas fa-exchange-alt"></i> è½¬å…¥å¼‚å¸¸éšæ‚£å°è´¦
                        </button>` : 
                        `<button class="btn-edit" onclick="editProblem(this)">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-confirm" onclick="confirmProblem(this)">
                            <i class="fas fa-check"></i>
                        </button>
                        <button class="btn-view" onclick="viewProblem(this)">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn-delete" onclick="deleteProblem(this)">
                            <i class="fas fa-trash"></i>
                        </button>`
                    }
                </div>
            `;
            
            // æ·»åŠ åˆ°å¯¹åº”çš„æ ‡ç­¾é¡µ
            const targetTab = document.getElementById(targetTabId);
            const problemList = targetTab.querySelector('.problem-list');
            problemList.appendChild(newProblemItem);
            
            // æ›´æ–°é—®é¢˜æ•°é‡
            updateProblemCounts();
            
            // å…³é—­æ¨¡æ€æ¡†
            closeAddProblemModal();
            
            // æ˜¾ç¤ºé€šçŸ¥
            showNotification('é—®é¢˜æ·»åŠ æˆåŠŸï¼');
            
            // å¦‚æœé—®é¢˜æ¸…å•å¡ç‰‡æ˜¯æŠ˜å çŠ¶æ€ï¼Œå±•å¼€å®ƒ
            const problemListCard = document.getElementById('problemList');
            if (problemListCard.classList.contains('collapsed')) {
                toggleCard('problemList');
            }
            
            // åˆ‡æ¢åˆ°å¯¹åº”çš„æ ‡ç­¾é¡µ
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });
            
            const activeTab = Array.from(tabs).find(tab => tab.textContent.includes(
                status === 'resolved' ? 'å½“ç­å·²å¤„ç†é—®é¢˜' : 
                (status === 'pending' ? 'äº¤ç­å¾…å¤„ç†é—®é¢˜' : 'é—ç•™é—®é¢˜')
            ));
            
            if (activeTab) {
                activeTab.classList.add('active');
                document.getElementById(targetTabId).classList.add('active');
            }
        }
        
        // ç¼–è¾‘é—®é¢˜
        function editProblem(button) {
            const problemItem = button.closest('.problem-list-item');
            const problemTitle = problemItem.querySelector('.problem-title').textContent.trim();
            showNotification(`æ­£åœ¨ç¼–è¾‘é—®é¢˜ï¼š${problemTitle}`);
            // å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæ‰“å¼€ç¼–è¾‘è¡¨å•
        }
        
        // ç¡®è®¤é—®é¢˜
        function confirmProblem(button) {
            const problemItem = button.closest('.problem-list-item');
            const problemTitle = problemItem.querySelector('.problem-title').textContent.trim();
            const statusBadge = problemItem.querySelector('.problem-status');
            
            if (confirm(`æ˜¯å¦å°†æ­¤é—®é¢˜"${problemTitle}"æ ‡è®°ä¸ºå·²å®Œæˆï¼Ÿ`)) {
                if (statusBadge.textContent.includes('å¾…å¤„ç†')) {
                    statusBadge.innerHTML = '<i class="fas fa-spinner"></i> å¤„ç†ä¸­';
                    statusBadge.className = 'problem-status in-progress';
                    showNotification(`é—®é¢˜"${problemTitle}"å·²æ ‡è®°ä¸ºå¤„ç†ä¸­`);
                } else if (statusBadge.textContent.includes('å¤„ç†ä¸­')) {
                    statusBadge.innerHTML = '<i class="fas fa-check-circle"></i> å·²å®Œæˆ';
                    statusBadge.className = 'problem-status resolved';
                    
                    // æ›´æ–°æ“ä½œæŒ‰é’®
                    const actionsContainer = problemItem.querySelector('.problem-actions');
                    actionsContainer.innerHTML = `
                        <button class="btn-transfer" onclick="transferToLedger(this)">
                            <i class="fas fa-exchange-alt"></i> è½¬å…¥å¼‚å¸¸éšæ‚£å°è´¦
                        </button>
                    `;
                    
                    // ç§»åŠ¨åˆ°"å½“ç­å·²å¤„ç†é—®é¢˜"æ ‡ç­¾é¡µ
                    const handledProblemsList = document.querySelector('#handledProblems .problem-list');
                    handledProblemsList.appendChild(problemItem);
                    
                    // æ›´æ–°é—®é¢˜æ•°é‡
                    updateProblemCounts();
                    
                    showNotification(`é—®é¢˜"${problemTitle}"å·²æ ‡è®°ä¸ºå·²å®Œæˆ`);
                }
            }
        }
        
        // æŸ¥çœ‹é—®é¢˜è¯¦æƒ…
        function viewProblem(button) {
            const problemItem = button.closest('.problem-list-item');
            const problemTitle = problemItem.querySelector('.problem-title').textContent.trim();
            const problemDescription = problemItem.querySelector('.problem-description').textContent;
            
            // æ¨¡æ‹ŸæŸ¥çœ‹è¯¦æƒ…å¼¹çª—
            alert(`é—®é¢˜è¯¦æƒ…ï¼š\n\næ ‡é¢˜ï¼š${problemTitle}\næè¿°ï¼š${problemDescription}`);
        }
        
        // åˆ é™¤é—®é¢˜
        function deleteProblem(button) {
            const problemItem = button.closest('.problem-list-item');
            const problemTitle = problemItem.querySelector('.problem-title').textContent.trim();
            
            if (confirm(`ç¡®å®šè¦åˆ é™¤é—®é¢˜"${problemTitle}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯é€†ã€‚`)) {
                problemItem.remove();
                updateProblemCounts();
                showNotification(`é—®é¢˜"${problemTitle}"å·²åˆ é™¤`);
            }
        }
        
        // è½¬å…¥å¼‚å¸¸éšæ‚£å°è´¦
        function transferToLedger(button) {
            const problemItem = button.closest('.problem-list-item');
            const problemTitle = problemItem.querySelector('.problem-title').textContent.trim();
            
            if (confirm(`ç¡®å®šè¦å°†é—®é¢˜"${problemTitle}"è½¬å…¥å¼‚å¸¸éšæ‚£å°è´¦å—ï¼Ÿ`)) {
                // æ¨¡æ‹Ÿé€‰æ‹©å°è´¦å¼¹çª—
                const ledgerName = prompt('è¯·è¾“å…¥ç›®æ ‡å°è´¦åç§°ï¼š');
                if (ledgerName) {
                    problemItem.remove();
                    updateProblemCounts();
                    showNotification(`é—®é¢˜"${problemTitle}"å·²è½¬å…¥"${ledgerName}"å°è´¦`);
                }
            }
        }
    </script>
</body>
</html>